<div class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content realtive">
            <div class="loading" ng-show="showLoading">
                <loading w="45" margin-top="100"></loading>
            </div>
            <div class="modal-header">
                <h4 class="modal-title">Create contract</h4>
            </div>
            <div class="modal-body realtive">
                <div ng-if="isCreated">
                    <div>Congratulations! Your contract is successfully created.</div>
                    <a class="text-orange-link" href="/#/contract/{{contract_id}}">See your contract</a>
                </div>
                <div ng-if="!isCreated" class="contract-style-form">
                    <form name="formContract" novalidate>
                        <div>Concract for</div>
                        <div class="form-group">
                            <md-input-container class="md-block" ng-class="{'has-error': submitted && formContract.title.$invalid}">
                                <label>Job title*</label>
                                <input class="form-control" name="title" ng-enter="createContract(contract); submitted=true" ng-model="contract.title" required>
                                <p class="error" ng-if="formContract.title.$error.required">Title is required</p>

                            </md-input-container>
                        </div>

                        <div class="form-group">
                            <md-input-container class="md-block">
                                <label>Job information</label>
                                <input class="form-control" ng-enter="createContract(contract); submitted=true" ng-model="contract.information">
                            </md-input-container>
                        </div>

                        <div class="text-bold ">Contracting Parties</div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group" ng-class="{'has-error': submitted && formContract.buyer_name.$invalid}">
                                    <md-input-container class="md-block">
                                        <label>Buyer Name*</label>
                                        <input class="form-control" name="buyer_name" ng-enter="createContract(contract); submitted=true" ng-model="contract.buyer_name" required>
                                        <p class="error" ng-if="formContract.buyer_name.$error.required">Buyer Name is required</p>
                                    </md-input-container>
                                </div>
                                <div class="form-group" ng-class="{'has-error': submitted && formContract.company_name.$invalid}">
                                    <md-input-container class="md-block">
                                        <label>Buyer Company name*</label>
                                        <input class="form-control" name="buyer_company_name" ng-enter="createContract(contract); submitted=true" ng-model="contract.buyer_company_name" required>
                                        <p class="error" ng-if="formContract.company_name.$error.required">Buyer Company name is required</p>
                                    </md-input-container>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <md-input-container class="md-block">
                                        <label>Seller Contact Person Name</label>
                                        <input class="form-control" ng-enter="createContract(contract); submitted=true" ng-model="contract.seller_contact">
                                    </md-input-container>
                                </div>
                                <div class="form-group">
                                    <md-input-container class="md-block">
                                        <label>Seller Name</label>
                                        <input class="form-control" ng-enter="createContract(contract); submitted=true" ng-model="contract.seller_name">
                                    </md-input-container>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <h3>Terms</h3>
                            <div class="form-group col-md-6 marginT30" ng-class="{'has-error': submitted && formContract.payment_basis.$invalid}">
                                <md-input-container class="md-block">
                                    <label>Payment Basis*<br>(mention deliverables, rate, and no. of units)</label>
                                    <input class="form-control" name="payment_basis" ng-enter="createContract(contract); submitted=true" ng-model="contract.payment_basis" required>
                                    <p class="error" ng-if="formContract.payment_basis.$error.required">Payment Basis is required</p>
                                </md-input-container>
                            </div>

                            <div class="form-group col-md-6 marginT30"  ng-class="{'has-error': submitted && formContract.final_amount.$invalid}">
                                <md-input-container class="md-block">
                                    <label>Final Amount to be paid (Rs.)* </label>
                                    <input class="form-control" numbers-only="" name="final_amount" ng-enter="createContract(contract); submitted=true" ng-model="contract.final_amount" required>
                                    <p class="error" ng-if="formContract.final_amount.$error.required">Final Amount is required</p>
                                </md-input-container>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6" ng-class="{'has-error': submitted && formContract.expected_start.$invalid}">
                                <div class="marginL20" ng-if="contract.expected_start">Start Date</div>
                                <md-datepicker ng-model="contract.expected_start" md-placeholder="Start Date*" md-open-on-focus=""></md-datepicker>
                                <p class="error" ng-if="formContract.expected_start.$error.required">Start Date is required</p>
                            </div>

                            <div class="form-group col-md-6" ng-class="{'has-error': submitted && formContract.expected_completion.$invalid}">
                                <div class="marginL20" ng-if="contract.expected_completion">Completion Date</div>
                                <md-datepicker ng-model="contract.expected_completion" md-placeholder="Completion Date*" md-open-on-focus=""></md-datepicker>
                                <p class="error" ng-if="formContract.expected_completion.$error.required">Completion Date is required</p>
                            </div>

                        </div>

                        <div>(Note: the contract will be sent to the service provider for approval.)</div>

                    </form>
                    <div class="text-error text-left" ng-if="error">{{error}}</div>
                </div>
            </div>
            <div class="modal-footer">
                <div>
                    <button ng-if="!isCreated" class="btn btn-default" ng-click="createContract(formContract.$invalid, 'update', contract, modal); submitted = true">Create Contract</button>
                    <button ng-if="!isCreated" class="btn btn-default" ng-click="preview()">Preview</button>
                    <button ng-if="isCreated" class="btn btn-default" data-dismiss="modal">OK</button>
                    <button class="btn background-orange text-white" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>