<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div ng-if="profile.poster && !profile_area.changeImage" class="text-center">
                <img ng-src="{{profile.poster.url}}" style="max-height: 200px"/>
                <button class="btn btn-default" ng-click="profile_area.changeImage=true" style="margin-top: 10px">Update</button>
            </div>
            <div ng-if="profile_area.changeImage || !profile.poster" class="containerDrop" ng-class="{'containerCrop':showCrop}" style="text-align: center;" ng-controller="uploadFile">
                <div ng-show="showDrop" ngf-drop ngf-select ng-model="picProfile" class="drop-box">Drop</div>
                <div ng-show="showCrop" ngf-drop ng-model="picProfile" ngf-pattern="image/*" style="height: 200px" class="cropArea">
                    <img-crop area-type="square" image="picProfile  | ngfDataUrl"
                              result-image="croppedDataUrl" ng-init="croppedDataUrl=''">
                    </img-crop>
                </div>
                <button ng-show="showCrop" class="btn btn-default" style="width: 100px;" ng-click="upload(croppedDataUrl, picProfile.name)">Save</button>
                <button class="btn btn-default" ng-click="profile_area.changeImage=false" style="width: 100px;">Cancel</button>
                <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
            </div>
        </div>
        <div class="col-md-6">
            <form name="_edit" novalidate>
                <div class="form-group" ng-class="{'has-error': submitted && _edit.first_name.$invalid}">
                    <md-input-container class="md-block">
                        <label>First Name</label>
                        <input class="form-control"  ng-model="profile.first_name" required>
                        <div ng-messages="submitted && _edit.first_name.$invalid" ng-class="{'md-auto-hide': !submitted}">
                            <div ng-show="submitted && _edit.first_name.$error.required" ng-message="required">First Name is required</div>
                        </div>
                    </md-input-container>
                </div>

                <div class="form-group" ng-class="{'has-error': submitted && _edit.last_name.$invalid}">
                    <md-input-container class="md-block">
                        <label>Last Name</label>
                        <input class="form-control" ng-model="profile.last_name" required>
                        <div ng-messages="submitted && _edit.last_name.$invalid" ng-class="{'md-auto-hide': !submitted}">
                            <div ng-show="submitted && _edit.last_name.$error.required" ng-message="required">Last Name is required</div>
                        </div>
                    </md-input-container>
                </div>

                <div class="form-group" ng-class="{'has-error': submitted && _edit.email.$invalid}">
                    <md-input-container class="md-block">
                        <label>Email Id</label>
                        <input class="form-control" name="email" type="email" ng-model="profile.email"
                               ng-pattern='/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/'
                               required>

                        <div ng-messages="submitted && _edit.email.$invalid" ng-class="{'md-auto-hide': !submitted}">
                            <div ng-show="submitted && _edit.email.$error.required" ng-message="required">Email is required</div>
                            <div ng-show="submitted && !_edit.email.$error.required && _edit.email.$error.pattern" ng-message="required">Email is invalid</div>
                        </div>
                    </md-input-container>
                </div>


                <div class="form-group" ng-class="{'has-error': submitted && _edit.phone.$invalid}">
                    <md-input-container class="md-block">
                        <label>Number mobile phone</label>
                        <input phone-number class="form-control" name="phone" ng-model="profile.phone" required>
                        <div ng-messages="submitted && _edit.phone.$invalid" ng-class="{'md-auto-hide': !submitted}">
                            <div ng-show="submitted && _edit.phone.$error.required" ng-message="required">Phone is required</div>
                        </div>

                    </md-input-container>
                </div>

                <div class="form-group">
                    <md-input-container class="md-block">
                        <label>Company Name</label>
                        <input class="form-control" ng-model="profile.company_name">
                    </md-input-container>
                </div>

                <div>
                    <button class="btn btn-default" ng-click="save(_edit.$invalid, profile);submitted=true;">Update</button>
                </div>
                <div>
                    <a class="pointer" ng-click="showModal(true)">Change Password</a>
                </div>
            </form>
        </div>
    </div>
</div>


<div ng-if="changePassword" class="delete-modal-block">
    <div class="row  modal-block-change-password background-white border-blue">
        <div class="col-xs-offset-1 col-xs-10">
            <div class="text-bold text-center padding7">Change password</div>
            <form name="_password" novalidate>
            <div class="form-group" ng-class="{'has-error': submittedPwd && (_password.old.$invalid || wrongPassword)}">
                <md-input-container class="md-block">
                    <label>Old password</label>
                    <input type="password" class="form-control" name="old" ng-model="password.oldPassword" required>


                    <div ng-messages="submittedPwd && _password.old.$invalid" ng-class="{'md-auto-hide': !submittedPwd}">
                        <div ng-show="submittedPwd && _password.old.$error.required" ng-message="required">Old password is required</div>
                        <div ng-if="wrongPassword">Wrong password</div>
                    </div>

                    <!--<p class="error" ng-if="_password.old.$error.required">Old password is required</p>-->
                    <!--<p class="error" ng-if="wrongPassword">Wrong password</p>-->
                </md-input-container>
            </div>

            <div class="form-group" ng-class="{'has-error': submittedPwd && (_password.new.$invalid || failPassword)}">
                <md-input-container class="md-block">
                    <label>New password</label>
                    <input type="password" class="form-control" name="new" ng-model="password.newPassword" required>

                    <div ng-messages="submittedPwd && _password.new.$invalid" ng-class="{'md-auto-hide': !submittedPwd}">
                        <div ng-show="submittedPwd && _password.new.$error.required" ng-message="required">New password is required</div>
                    </div>
                </md-input-container>
            </div>

            <div class="form-group" ng-class="{'has-error': submittedPwd && (_password.confirm.$invalid || failPassword) }">
                <md-input-container class="md-block">
                    <label>Confirm new password</label>
                    <input type="password" class="form-control" name="confirm" ng-model="password.confirm_password" required equals="{{password.newPassword}}">

                    <div ng-messages="submittedPwd && _password.confirm.$invalid" ng-class="{'md-auto-hide': !submittedPwd}">
                        <div ng-show="submittedPwd && _password.confirm.$error.required" ng-message="required">Confirm new password is required</div>
                        <div ng-show="submittedPwd && _password.confirm.$error.equals" ng-message="equals">Passwords do not match</div>
                    </div>
                </md-input-container>
            </div>

            <div>
                <button class="btn background-orange text-white" ng-click="change(_password.$invalid, password);submittedPwd=true">Submit</button>
                <button class="btn background-orange text-white" ng-click="showModal(false)">Cancel</button>
            </div>
            </form>
        </div>
    </div>
</div>